## ä»‹ç»

> ESLint æ˜¯ä¸€ä¸ªå¼€æºçš„ JavaScript çš„ä»£ç æ£€æŸ¥å·¥å…·ï¼Œä½¿ç”¨ espree å°†ä»£ç è§£æä¸ºæŠ½è±¡è¯­æ³•ä¹¦ï¼ˆASTï¼‰ï¼Œé€šè¿‡ AST è¿›è¡Œé™æ€ä»£ç åˆ†æï¼Œå¹¶ç»™äºˆä»£ç æ ¼å¼å’Œä»£ç è´¨é‡ä¸¤ä¸ªæ–¹é¢çš„æç¤ºï¼š

1. ä»£ç æ ¼å¼ï¼ˆFormatting rulesï¼‰ï¼šTab é•¿åº¦ã€å‡½æ•°æœ€å¤§è¡Œæ•°ã€å°¾éšåˆ†å·ç­‰
2. ä»£ç è´¨é‡ï¼ˆCode-quality rulesï¼‰ï¼šæœªä½¿ç”¨çš„å˜é‡ã€ä½¿ç”¨åˆ°äº†ä¿ç•™å­—ã€å…¨å±€å˜é‡çš„æ±¡æŸ“ç­‰é—®é¢˜ã€‚

## å®‰è£…

`yarn add eslint -D`

## ä½¿ç”¨

### åˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®

**é¡¹ç›®ä¸‹æ‰§è¡Œ**

- éå…¨å±€ `yarn eslint --init`
- å…¨å±€`eslint --init`

```text
ï¼ˆ1ï¼‰How would you like to use ESLint?
    To check syntax only // åªæ£€æŸ¥è¯­æ³•æ€§é”™è¯¯
    To check syntax and find problems // æ£€æŸ¥è¯­æ³•é”™è¯¯å¹¶ä¸”å‘ç°é—®é¢˜ä»£ç 
    > To check syntax, find problems, and enforce code style // æ£€æŸ¥è¯­æ³•é”™è¯¯ï¼Œå‘ç°é—®é¢˜ä»£ç ï¼Œæ ¡éªŒä»£ç é£æ ¼
    é€‰ç¬¬ä¸‰ä¸ªï¼Œæ£€æŸ¥è¯­æ³•é”™è¯¯ï¼Œå‘ç°é—®é¢˜ä»£ç ï¼Œæ ¡éªŒä»£ç é£æ ¼
ï¼ˆ2ï¼‰What type of modules dos your project use?
    > JavaScript modules (import/export) // ESMï¼šå…è®¸ä½¿ç”¨import/export
    CommonJS (require/exports) // CommonJSï¼šå…è®¸ä½¿ç”¨require/exports
    None of these // æ²¡æœ‰ç”¨åˆ°ä»»ä½•æ¨¡å—åŒ–
    é€‰ç¬¬ä¸€ä¸ªï¼Œimport/export
ï¼ˆ3ï¼‰Which framework does you project use?
    React
    > Vue.js
    None of these
    é€‰vue
ï¼ˆ4ï¼‰Does your project use TypeScript? No / Yes  // æ˜¯å¦æ”¯æŒTypeScript
    è¾“å…¥yes
ï¼ˆ5ï¼‰Where does you code run? // ä»£ç è¿è¡Œç¯å¢ƒ å¤šé€‰
    (*) Browser // æµè§ˆå™¨ç¯å¢ƒ
    (*) Node // nodeç¯å¢ƒ
    ä¸¤ä¸ªéƒ½é€‰
ï¼ˆ6ï¼‰How would you like to define a style for your project? // ä½ å–œæ¬¢çš„ä»£ç é£æ ¼
    > Use a popular style guide // ä½¿ç”¨ä¸€ä¸ªå¸‚é¢ä¸Šçš„ä¸»æµé£æ ¼
    Answer questions about your style // é€šè¿‡å›ç­”é—®é¢˜ï¼Œå½¢æˆä¸€ä¸ªé£æ ¼
    Inspect your JavaScript file(s) // æ ¹æ®JSä»£ç æ–‡ä»¶ï¼Œæ¨æ–­ä»£ç é£æ ¼
    é€‰ç¬¬ä¸€ä¸ªï¼Œå¸‚é¢ä¸»æµé£æ ¼
ï¼ˆ7ï¼‰Which style guide do you want to follow? // é€‰ä¸€ä¸ªè¦ä½¿ç”¨çš„è§„èŒƒ
    Airbnb: https://github.com/airbnb/javascript
    > Standard: https://github.com/standard/standard
    Google: https://github.com/google/eslint-config-google
    XO: https://github.com/xojs/eslint-config-xo
    é€‰ç¬¬äºŒä¸ªï¼Œå¼€æº
ï¼ˆ8ï¼‰What format do you want your config file to be in?  // é…ç½®æ–‡ä»¶ç±»å‹
    > JavaScript
    YAML
    JSON
    é€‰ç¬¬ä¸€ä¸ªJavaScriptï¼Œjsæ–‡ä»¶æ›´åˆ©äºæ‰©å±•
ï¼ˆ9ï¼‰Would you like to install them now with npm? â€º No / Yes  // ç°åœ¨ç”¨å®‰è£…npmè§„èŒƒå—ï¼Ÿ
    é€‰yes
```

å¾—åˆ°.eslintrc.js é…ç½®æ–‡ä»¶

```javascript
module.exports = {
  env: {
    browser: true,
    es2021: true,
    node: true,
  },
  extends: ["plugin:vue/essential", "standard"],
  parserOptions: {
    ecmaVersion: "latest",
    sourceType: "module",
  },
  plugins: ["vue"],
  rules: {},
};
```

### å¸¸ç”¨å‘½ä»¤

ç¤ºä¾‹

```text
// æ£€æµ‹srcç›®å½•ä¸‹ï¼Œ.js,.jsx,.ts,.tsxç±»å‹ï¼Œå¹¶è‡ªåŠ¨è¿›è¡Œä¿®å¤
eslint src --ext .js,.jsx,.ts,.tsx --fix
```

[å®˜æ–¹æ–‡æ¡£](https://cn.eslint.org/docs/user-guide/command-line-interface#options)ä¸‹é¢æ˜¯ä¸€äº›å‘½ä»¤é€‰é¡¹çš„æè¿°ï¼š

**åŸºæœ¬é…ç½®**

- `--no-eslintrc`ï¼šç¦ç”¨ .eslintrc.\* å’Œ package.json æ–‡ä»¶ä¸­çš„é…ç½®ã€‚
- `-c`, --configï¼šè¯¥é€‰é¡¹å…è®¸ä½ ä¸º ESLint æŒ‡å®šä¸€ä¸ªé¢å¤–çš„é…ç½®æ–‡ä»¶ã€‚
- `--env`ï¼šç”¨äºæŒ‡å®šç¯å¢ƒã€‚è¯¥é€‰é¡¹åªèƒ½å¯ç”¨ç¯å¢ƒï¼Œä¸èƒ½ç¦ç”¨åœ¨å…¶å®ƒé…ç½®æ–‡ä»¶ä¸­è®¾ç½®çš„ç¯å¢ƒã€‚è¦æŒ‡å®šå¤šä¸ªç¯å¢ƒçš„è¯ï¼Œä½¿ç”¨é€—å·åˆ†éš”å®ƒä»¬ï¼Œæˆ–å¤šæ¬¡ä½¿ç”¨è¿™ä¸ªé€‰é¡¹ã€‚
- `--ext`ï¼šå¯ä»¥æŒ‡å®šåœ¨æŒ‡å®šç›®å½•ä¸­æœç´¢ JavaScript æ–‡ä»¶æ—¶ï¼ŒESLint å°†ä½¿ç”¨å“ªäº›æ–‡ä»¶æ‰©å±•åã€‚é»˜è®¤æ‰©å±•åä¸º.jsã€‚
- `--global`ï¼šç”¨äºå®šä¹‰å…¨å±€å˜é‡ã€‚ä»»ä½•æŒ‡å®šçš„å…¨å±€å˜é‡é»˜è®¤æ˜¯åªè¯»çš„ï¼Œåœ¨å˜é‡åå­—ååŠ ä¸Š :true åä¼šä½¿å®ƒå˜ä¸ºå¯å†™ã€‚è¦æŒ‡å®šå¤šä¸ªå˜é‡ï¼Œä½¿ç”¨é€—å·åˆ†éš”å®ƒä»¬ï¼Œæˆ–å¤šæ¬¡ä½¿ç”¨è¿™ä¸ªé€‰é¡¹ã€‚

**æŒ‡å®šè§„åˆ™å’Œæ’ä»¶**

- `--rulesdir`ï¼šè¯¥é€‰é¡¹å…è®¸æŒ‡å®šå¦ä¸€ä¸ªåŠ è½½è§„åˆ™æ–‡ä»¶çš„ç›®å½•ã€‚
- `--plugin`ï¼šç”¨äºæŒ‡å®šä¸€ä¸ªè¦åŠ è½½çš„æ’ä»¶ã€‚å¯ä»¥çœç•¥æ’ä»¶åçš„å‰ç¼€ eslint-plugin-ã€‚
- `--rule`ï¼šè¯¥é€‰é¡¹æŒ‡å®šè¦ä½¿ç”¨çš„è§„åˆ™ã€‚è¿™äº›è§„åˆ™å°†ä¼šä¸é…åˆ¶æ–‡ä»¶ä¸­æŒ‡å®šçš„è§„åˆ™åˆå¹¶ã€‚å®šä¹‰å¤šä¸ªè§„åˆ™æ—¶ä½¿ç”¨é€—å·åˆ†éš”å®ƒä»¬ï¼Œæˆ–å¤šæ¬¡ä½¿ç”¨è¿™ä¸ªé€‰é¡¹ã€‚

**è§£å†³é—®é¢˜é€‰é¡¹**

- `--fix`ï¼šè¯¥é€‰é¡¹æŒ‡ç¤º ESLint è¯•å›¾ä¿®å¤å°½å¯èƒ½å¤šçš„é—®é¢˜ã€‚ä¿®å¤åªé’ˆå¯¹å®é™…æ–‡ä»¶æœ¬èº«ï¼Œè€Œä¸”å‰©ä¸‹çš„æœªä¿®å¤çš„é—®é¢˜æ‰ä¼šè¾“å‡ºã€‚
- `--fix-dry-run`ï¼šè¯¥é€‰é¡¹ä¸ --fix æœ‰ç›¸åŒçš„æ•ˆæœï¼Œå”¯ä¸€ä¸€ç‚¹ä¸åŒæ˜¯ï¼Œä¿®å¤ä¸ä¼šä¿å­˜åˆ°æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚
- `--fix-type`ï¼šè¯¥é€‰é¡¹å…è®¸ä½ åœ¨ä½¿ç”¨ --fix æˆ– --fix-dry-run æ—¶æŒ‡å®šè¦åº”ç”¨çš„ä¿®å¤çš„ç±»å‹ã€‚ä¿®å¤çš„ä¸‰ç§ç±»å‹æ˜¯ problemã€suggestionã€layoutã€‚

**å¿½ç•¥æ–‡ä»¶é€‰é¡¹**

- `--ignore-path`ï¼šè¯¥é€‰é¡¹å…è®¸ä½ æŒ‡å®šä¸€ä¸ªæ–‡ä»¶ä½œä¸º .eslintignoreã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒESLint åœ¨å½“å‰å·¥ä½œç›®å½•ä¸‹æŸ¥æ‰¾ .eslintignoreã€‚
- `--no-ignore`ï¼šè¯¥é€‰é¡¹ç¦æ­¢æ’é™¤ .eslintignoreã€--ignore-path å’Œ --ignore-pattern æ–‡ä»¶ä¸­æŒ‡å®šçš„æ–‡ä»¶ã€‚
- `--ignore-pattern`ï¼šè¯¥é€‰é¡¹å…è®¸ä½ æŒ‡å®šè¦å¿½ç•¥çš„æ–‡ä»¶æ¨¡å¼ï¼Œé™¤äº† .eslintignore ä¸­çš„æ¨¡å¼ä¹‹å¤–ã€‚å¯ä»¥é‡å¤è¯¥é€‰é¡¹ä»¥æä¾›å¤šä¸ªæ¨¡å¼ã€‚

**ä½¿ç”¨æ ‡å‡†è¾“å…¥é€‰é¡¹**

- `--stdin`ï¼šè¯¥é€‰é¡¹å‘Šè¯‰ ESLint ä» STDIN è€Œä¸æ˜¯ä»æ–‡ä»¶ä¸­è¯»å–å’Œæ£€æµ‹æºç ã€‚
- -`-stdin-filename`ï¼šè¯¥é€‰é¡¹å…è®¸ä½ æŒ‡å®šä¸€ä¸ªæ–‡ä»¶åå»å¤„ç† STDINã€‚å½“ä½ å¤„ç†ä» STDIN æ¥çš„æ–‡ä»¶å’Œæœ‰è§„åˆ™ä¾èµ–äºè¿™ä¸ªæ–‡ä»¶åæ—¶ï¼Œè¿™ä¼šå¾ˆæœ‰ç”¨ã€‚

**å¤„ç†è­¦å‘Šé€‰é¡¹**

- `--quiet`ï¼šè¯¥é€‰é¡¹å…è®¸ä½ ç¦æ­¢æŠ¥å‘Šè­¦å‘Šã€‚å¦‚æœå¼€å¯è¿™ä¸ªé€‰é¡¹ï¼ŒESLint åªä¼šæŠ¥å‘Šé”™è¯¯ã€‚
- `--max-warnings`ï¼šè¯¥é€‰é¡¹å…è®¸ä½ æŒ‡å®šä¸€ä¸ªè­¦å‘Šçš„é˜ˆå€¼ï¼Œå½“ä½ çš„é¡¹ç›®ä¸­æœ‰å¤ªå¤šè¿åè§„åˆ™çš„è­¦å‘Šæ—¶ï¼Œè¿™ä¸ªé˜ˆå€¼è¢«ç”¨æ¥å¼ºåˆ¶ ESLint ä»¥é”™è¯¯çŠ¶æ€é€€å‡ºã€‚

**å…¶ä»–**

- `--init`ï¼šè¯¥é€‰é¡¹å°†ä¼šé…ç½®åˆå§‹åŒ–å‘å¯¼ã€‚å®ƒè¢«ç”¨æ¥å¸®åŠ©æ–°ç”¨æˆ·å¿«é€Ÿåœ°åˆ›å»º .eslintrc æ–‡ä»¶ï¼Œç”¨æˆ·é€šè¿‡å›ç­”ä¸€äº›é—®é¢˜ï¼Œé€‰æ‹©ä¸€ä¸ªæµè¡Œçš„é£æ ¼æŒ‡å—ï¼Œæˆ–æ£€æŸ¥ä½ çš„æºæ–‡ä»¶ï¼Œè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªåˆé€‚çš„é…ç½®ã€‚
- `--debug`ï¼šè¯¥é€‰é¡¹å°†è°ƒè¯•ä¿¡æ¯è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚
- `-h`, `--help`ï¼šè¯¥é€‰é¡¹ä¼šè¾“å‡ºå¸®åŠ©èœå•ï¼Œæ˜¾ç¤ºæ‰€æœ‰å¯ç”¨çš„é€‰é¡¹ã€‚å½“æœ‰è¿™ä¸ªé€‰é¡¹æ—¶ï¼Œå¿½ç•¥å…¶ä»–æ‰€æœ‰é€‰é¡¹ã€‚
- `-v`, `--version`ï¼šè¯¥é€‰é¡¹åœ¨æ§åˆ¶å°è¾“å‡ºå½“å‰ ESlint çš„ç‰ˆæœ¬ã€‚å½“æœ‰è¿™ä¸ªæ ‡è®°æ—¶ï¼Œå¿½ç•¥å…¶ä»–æ‰€æœ‰æ ‡è®°ã€‚
- `--print-config`ï¼šè¯¥é€‰é¡¹è¾“å‡ºä¼ é€’çš„æ–‡ä»¶ä½¿ç”¨çš„é…ç½®ã€‚å½“æœ‰è¿™ä¸ªæ ‡è®°æ—¶ï¼Œä¸è¿›è¡Œæ£€æµ‹ï¼Œåªæœ‰é…ç½®ç›¸å…³çš„é€‰é¡¹æ‰æ˜¯æœ‰æ•ˆçš„ã€‚

**é€€å‡ºç **  
å½“æ£€æµ‹æ–‡ä»¶æ—¶ï¼ŒESLint å¯ä»¥ä½¿ç”¨ä»¥ä¸‹é€€å‡ºä»£ç ä¹‹ä¸€é€€å‡º ï¼š

- 0ï¼šæ£€æµ‹æˆåŠŸï¼Œæ²¡æœ‰é”™è¯¯ã€‚å¦‚æœ --max-warnings æ ‡å¿—è¢«è®¾ç½®ä¸º nï¼Œé‚£ä¹ˆè­¦å‘Šæ•°é‡æœ€å¤šä¸º nã€‚
- 1ï¼šæ£€æµ‹æˆåŠŸï¼Œå¹¶ä¸”è‡³å°‘æœ‰ä¸€ä¸ªé”™è¯¯ï¼Œæˆ–è€…è­¦å‘Šå¤šäº --max-warnings é€‰é¡¹æ‰€å…è®¸çš„è­¦å‘Šã€‚
- 2ï¼šç”±äºé…ç½®é—®é¢˜æˆ–å†…éƒ¨é”™è¯¯ï¼Œæ£€æµ‹æœªèƒ½æˆåŠŸã€‚

## é…ç½®

### env

æŒ‡å®šè„šæœ¬çš„è¿è¡Œç¯å¢ƒï¼Œæ¯ä¸€ä¸ªç¯å¢ƒå®šä¹‰äº†ä¸€ç»„é¢„å®šä¹‰çš„å…¨å±€å˜é‡ï¼Œå¯ä»¥å®šä¹‰å¤šä¸ªç¯å¢ƒã€‚

```javascript
env: {
  browser: true,
  es2021: true,
  node: true
}
```

### parser

eslint è§£æå™¨ï¼Œé»˜è®¤[Espree]ï¼Œè¿˜æœ‰[esprima](https://www.npmjs.com/package/esprima)ã€[@babel/eslint-parser](https://www.npmjs.com/package/@babel/eslint-parser)ç­‰è§£æå™¨ï¼Œæ²¡æœ‰è¿‡å¤šçš„äº†è§£ã€‚[å®˜æ–¹å‚è€ƒ](https://cn.eslint.org/docs/user-guide/configuring#specifying-parser)  
typescript é¡¹ç›®è¦ä½¿ç”¨[@typescript-eslint/parser](https://www.npmjs.com/package/@typescript-eslint/parser)è§£æå™¨  
æ·±å…¥äº†è§£ AST,[å¯ä»¥ç‚¹å‡»è¿™é‡Œ](https://juejin.cn/post/7062687356402270244)

### parserOptions

parser çš„è§£æé…ç½®ï¼Œ[å®˜æ–¹æ–‡æ¡£](https://cn.eslint.org/docs/user-guide/configuring#specifying-parser-options)

- ecmaVersion å¯ä»¥ä½¿ç”¨`latest`è¡¨ç¤ºæœ€æ–°çš„ ECMA ç‰ˆæœ¬

#### vue éœ€å•ç‹¬é…ç½® parser

- eslint é»˜è®¤ä½¿ç”¨çš„ parser è§£æå™¨æ˜¯`@babel/eslint-parser`,è¯¥ parser`jsã€ts`éƒ½èƒ½è§£æï¼Œä½†æ˜¯`@babel/eslint-parser`ä¸­çš„è§„åˆ™ä¸æ”¯æŒå¯¹ ts è¿›è¡Œ lintï¼Œ
- æ‰€ä»¥æˆ‘ä»¬ ts é¡¹ç›®ï¼Œè¦å°†è§£æå™¨ parser æ¢æˆ`@typescript-eslint/parser`ï¼Œæˆ‘ä»¬è§£æ vue æ–‡ä»¶ï¼Œè¦å°† parser æ¢æˆ`vue-eslint-parser`,
- vue å®˜æ–¹æä¾›äº†`vue-eslint-parser`åŒ…æ¥å¯¹`.vue`æ–‡ä»¶ä¸­ template éƒ¨åˆ†è¿›è¡Œè½¬æ¢ï¼Œscript éƒ¨åˆ†éœ€è¦é¢å¤–é…ç½®ä¸€ä¸ª`js/tsparser`ï¼Œå¯ä»¥åœ¨ parserOption.parser ä¸­è¿›è¡ŒæŒ‡å®šã€‚
- `parserOptions`é…ç½®çš„æ˜¯è§£æ js ç›¸å…³çš„é…ç½®ï¼Œé»˜è®¤è§£æå™¨ parser ä¸º`@babel/eslint-parser`ï¼Œvue ä½¿ç”¨ ts çš„è¯ï¼Œå°±è¦æ‰‹åŠ¨æ¢æˆ`@typescript-eslint/parser`

```json
// .eslintrc.cjs
parserOptions: {
    ecmaVersion: 'latest',
    sourceType: 'module',
  + parser: "@typescript-eslint/parser",
},
```

**å‚è€ƒ**

1. [eslint parser é…ç½®å®è·µ](https://www.proyy.com/6959394194452381710.html)

### overrides

é€šå¸¸åœ¨ä¸€äº›é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬éœ€è¦é’ˆå¯¹ä¸åŒçš„æ–‡ä»¶è¿›è¡Œä¸åŒçš„ Lint é…ç½®ï¼Œé‚£ä¹ˆæ­¤æ—¶ EsLint åŒæ ·ä¸ºæˆ‘ä»¬æä¾›äº† Overrides é€‰é¡¹æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚  
æ¯”å¦‚ï¼Œæˆ‘ä»¬é¡¹ç›®ä¸­å­˜åœ¨ä¸€äº›ä»¥ .testã€.spec ç»“å°¾çš„æµ‹è¯•æ–‡ä»¶ï¼Œé‚£ä¹ˆæ­¤æ—¶æˆ‘ä»¬å¸Œæœ›è¿™äº›æµ‹è¯•æ–‡ä»¶å¯ä»¥æ‹¥æœ‰ä¸åŒçš„ Lint é…ç½®è§„åˆ™ã€‚  
é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ Overrieds é…ç½®æ¥è¿›è¡Œç‰¹å®šæ–‡ä»¶çš„è§„åˆ™è¦†ç›–ï¼Œæ¯”å¦‚ï¼š

```javascript
// .eslintrc.js
module.exports = {
  rules: {
    "no-console": 2,
  },
  overrides: [
    // *.test.js ä»¥åŠ *.spec.js ç»“å°¾çš„æ–‡ä»¶ç‰¹æ®Šå®šä¹‰æŸäº›è§„åˆ™
    {
      files: ["*-test.js", "*.spec.js"],
      rules: {
        "no-unused-expressions": 2,
      },
    },
  ],
};
```

ä¸Šè¿°çš„é…ç½®ä¸­ï¼Œé’ˆå¯¹äº _.test.js/_.spce.js çš„è¯æ—¢æ”¯æŒ no-console çš„è§„åˆ™åŒæ—¶ä¹Ÿå¼€å¯äº† no-unused-expressions çš„è§„åˆ™ã€‚

### plugins

æ’ä»¶ç”¨æ¥å¢å¼º eslint èƒ½åŠ›ã€‚  
å¦‚ï¼šeslint-plugin-prettierï¼ŒæŠŠ prettier çš„èƒ½åŠ›èµ‹ç»™ eslintï¼Œè®© eslint æ‹¥æœ‰å’Œ prettier ä¸€æ ·çš„ä»£ç æ ¼å¼åŒ–èƒ½åŠ›ã€‚

**ç¼©å†™**  
`plugin1`ç­‰åŒäº `eslint-plugin-plugin1`

```javascript
{
  plugins: [
    "prettier", // ç­‰åŒäº  eslint-plugin-prettier
  ];
}
```

### extends

åˆ«äººæå‰å†™å¥½çš„ä¸€å¥— rules,ä¹Ÿå°±æ˜¯ä¸€ä»½åˆ«äººé…ç½®å¥½çš„.eslintrc.js

**æ³¨æ„ï¼š**

- æ•°ç»„ä¸­ï¼Œåé¢çš„è§„åˆ™ï¼Œä¼šè¦†ç›–å‰é¢çš„

**1.å¼•å…¥æ’ä»¶ä¸‹çš„ rules é›†**

> å¼•å…¥æ’ä»¶ä¸‹çš„ rules åˆé›†ï¼Œå¿…é¡»ä»¥`plugin`å¼€å¤´ï¼Œ`plugin:plugin_name/config_name`

eslint-plugin-vue æ’ä»¶æºç ï¼ˆä½ç½®ï¼š`./node_modules/eslint-plugin-vue/lib/index.js`ï¼‰

```javascript
module.exports = {
  rules: {
    // ...çœç•¥
  },
  configs: {
    base: require("./configs/base"),
    essential: require("./configs/essential"),
    "no-layout-rules": require("./configs/no-layout-rules"),
    recommended: require("./configs/recommended"),
    "strongly-recommended": require("./configs/strongly-recommended"),
    "vue3-essential": require("./configs/vue3-essential"),
    "vue3-recommended": require("./configs/vue3-recommended"),
    "vue3-strongly-recommended": require("./configs/vue3-strongly-recommended"),
  },
  processors: {
    ".vue": require("./processor"),
  },
};
```

å¯ä»¥çœ‹åˆ° eslint-plugin-vue ä¸‹ configs æä¾›äº† 8 å¥—ä¸åŒ rulse è§„èŒƒï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼•å…¥ä»»ä½•ä¸€å¥—ä½œä¸ºé¡¹ç›®æ£€æŸ¥ vue æ–‡ä»¶çš„è§„èŒƒã€‚

**2. å¼•å…¥åˆ«äººå†™å¥½çš„ rules åˆé›†**

> å…¨ç§°`eslint-config-myconfig`ï¼Œç®€ç§°`'myconfig`

**åˆ†æ**

```javascript
module.exports = {
  extends: [
    "eslint:recommend",
    "plugin:vue/vue3-recommended",
    "prettier",
    "prettier/@typescript-eslint",
  ],
  plugins: [],
  rules: {},
};
```

- `eslint:recommend` ã€æ’ä»¶ã€‘ï¼Œæ²¡æœ‰ eslint-config-eslint æ’ä»¶ï¼Œè¯´æ˜æ˜¯æ’ä»¶å/è·¯å¾„ï¼Œåœ¨`/node_modules/eslint/conf/eslint-recommended.js`æ‰¾åˆ°äº†ï¼Œeslint å†…éƒ¨å°è£…çš„æ¯”è¾ƒå¤æ‚ï¼Œä¸çŸ¥é“æ€ä¹ˆå¯¼å‡ºçš„ recommend rules é›†åˆï¼Œåªèƒ½è¯´è¿™ä¸ªè§„åˆ™é›†åˆç¡®å®å­˜åœ¨ ğŸ˜‚
- `plugin:vue/vue3-recommended` ã€æ’ä»¶ã€‘`/node_modules/eslint-plugin-vue/lib/index.js`ä¸‹æ‰¾åˆ°äº† configs.vue3-recommended
- `prettier` ã€configã€‘`/node_modules/eslint-config-prettier`
- `prettier/@typescript-eslint` ã€configã€‘`/node_modules/eslint-config-prettier/@typescript-eslint.js`

### rules

[å…¨éƒ¨è§„åˆ™](https://cn.eslint.org/docs/rules/)

- `"off"` æˆ– 0 - å…³é—­è§„åˆ™
- `"warn"` æˆ– 1 - å¼€å¯è§„åˆ™ï¼Œä½¿ç”¨è­¦å‘Šçº§åˆ«çš„é”™è¯¯ï¼šwarn (ä¸ä¼šå¯¼è‡´ç¨‹åºé€€å‡º)
- `"error"` æˆ– 2 - å¼€å¯è§„åˆ™ï¼Œä½¿ç”¨é”™è¯¯çº§åˆ«çš„é”™è¯¯ï¼šerror (å½“è¢«è§¦å‘çš„æ—¶å€™ï¼Œç¨‹åºä¼šé€€å‡º)

**1. åœ¨æŸä¸ªæ–‡ä»¶é‡Œé…ç½®è§„åˆ™ï¼ˆåªåœ¨å½“å‰æ–‡ä»¶ä¸­ç”Ÿæ•ˆï¼‰**

```javascript
/* eslint eqeqeq: 0, curly: "error" */
```

**2. å…¨å±€é…ç½®**

```javascript
{
    "plugins": [
        "plugin1",
        "react" // é…ç½® eslint-plugin-react æ’ä»¶
    ],
    "rules": {
        "eqeqeq": "off",
        "curly": "error",
        "quotes": ["error", "double"],
        "plugin1/rule1": "error", // plugin1æ’ä»¶ä¸­çš„é…ç½®
        "react/jsx-boolean-value": 2 // é…ç½®eslint-plugin-react çš„ jsx-boolean-value è§„åˆ™
    }
}
```

è§„åˆ™ `plugin1/rule1` è¡¨ç¤ºæ¥è‡ªæ’ä»¶ plugin1 çš„ rule1 è§„åˆ™

### globals

> é…ç½®å…¨å±€å˜é‡[å®˜æ–¹æ–‡æ¡£](http://eslint.cn/docs/user-guide/configuring#specifying-globals)

- readonly/falseâ€”â€”åªè¯»
- writable/trueâ€”â€”è¯»å†™
- offâ€”â€”ç¦ç”¨è¯¥å…¨å±€å˜é‡

**1. å½“å‰æ–‡ä»¶å®šä¹‰ï¼ˆå±€éƒ¨ï¼‰**

```javascript
/* global $ */
console.log($); // è¿™æ ·ä½¿ç”¨å˜é‡$ å°±ä¸ä¼šæŠ¥é”™
```

**2. å…¨å±€é…ç½®**

```javascript
// eslintrc.jså†…é…ç½®
module.exports = {
  extends: [
    // ...
  ],
  plugins: [
    //....
  ],
  // åœ¨æ¯ä¸ªjsæ–‡ä»¶éƒ½å¯ä»¥ä½¿ç”¨è¿™äº›å…¨å±€å˜é‡äº†
  globals: {
    $: true,
    describe: true,
    expect: true,
    test: true,
  },
};
```

## é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§

- å¦‚æœé¡¹ç›®ç›®å½•ä¸‹æœ‰å¤šä¸ªé…ç½®æ–‡ä»¶ï¼ŒESLint åªä¼šä½¿ç”¨ä¸€ä¸ªï¼Œä¼˜å…ˆçº§ä¸ºï¼š`.eslintrc.js` > `.eslintrc` > `package.json`ï¼Œä¸€èˆ¬æˆ‘ä»¬éƒ½æ˜¯åœ¨ `.eslintrc.js` é…ç½®ã€‚
- åŒæ—¶ï¼Œå¦‚æœé…ç½®æ–‡ä»¶é‡Œæ²¡æœ‰`"root": true`è¿™ä¸ªå±æ€§ï¼ŒESLint å°±ä¼šç»§ç»­å‘å¤–å¯»æ‰¾é…ç½®æ–‡ä»¶ï¼Œç›´åˆ°æ‰¾åˆ°æœ‰`"root": true`çš„ä¸ºæ­¢ã€‚
- å»ºè®®ç»™é¡¹ç›®æ ¹ç›®å½•çš„.eslintrc.js åŠ ä¸Š`root: true`

## å¸¸ç”¨æ’ä»¶

**1. [eslint-plugin-html](https://www.npmjs.com/package/eslint-plugin-html)**

> é€šè¿‡è¿™ä¸ªæ’ä»¶ä½ å¯ä»¥è®© eslint å»æ£€æµ‹ html æ–‡ä»¶ script æ ‡ç­¾é‡Œçš„ js ä»£ç ã€‚ä½¿ç”¨ç¤ºä¾‹ï¼š

```javascript
// .eslintrc.js

{
    "plugins": [
        "html"
    ]
}
```

**2. eslint-plugin-import**

> è¿™ä¸ªæ’ä»¶æ„åœ¨æä¾›å¯¹ ES6+ import/export è¯­æ³•çš„æ”¯æŒï¼Œæœ‰åŠ©äºé˜²æ­¢ä½ å†™é”™æ–‡ä»¶è·¯å¾„æˆ–è€…å¼•ç”¨çš„å˜é‡åã€‚ä½¿ç”¨ç¤ºä¾‹ï¼š

```javascript
{
    "plugins": [
        "import"
    ],
    "rules": {
        "import/no-unresolved": [2, { "commonjs": true, "amd": true }],
        "import/named": 2,
        "import/namespace": 2,
        "import/default": 2,
        "import/export": 2,
        // # etc...
    }
}
```

æˆ–è€…ä½¿ç”¨ç°æˆçš„æ¨èè§„åˆ™ï¼š

```javascript
{
    "extends": {
        "eslint:recommended",
        "plugin:import/errors",
        "plugin:import/warnings"
    }
}
```

**3. eslint-plugin-node**

> æ·»åŠ å¯¹ node çš„ eslint æ”¯æŒã€‚ä½¿ç”¨ç¤ºä¾‹ï¼š

```javascript
{
    "plugins": ["node"],
    "extends": ["eslint:recommended", "plugin:node/recommended"],
    "rules": {
        "node/exports-style": ["error", "module.exports"],
    }
}
```

**4. eslint-plugin-promise**

```javascript
{
    "plugins": [
        "promise"
    ],
    "rules": {
        "promise/always-return": "error",
        "promise/no-return-wrap": "error",
        "promise/param-names": "error",
        "promise/catch-or-return": "error",
        "promise/no-native": "off",
        "promise/no-nesting": "warn",
        "promise/no-promise-in-callback": "warn",
        "promise/no-callback-in-promise": "warn",
        "promise/avoid-new": "warn",
        "promise/no-return-in-finally": "warn"
    }
}
```

æˆ–è€…ç›´æ¥ä½¿ç”¨ç°æˆçš„æ¨èè§„åˆ™ï¼š

```javascript
{
    "extends": [
        "plugin:promise/recommended"
    ]
}
```

**5. eslint-plugin-standard**

> è¿™æ˜¯ä¸€ä¸ªä¸º Standard Linter è€Œåšçš„è¡¥å……æ’ä»¶ï¼Œä¸€å…±å°±æ‰©å±•äº† 4 ä¸ªè§„åˆ™ï¼Œä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š

```javascript
{
  rules: {
    'standard/object-curly-even-spacing': [2, "either"]
    'standard/array-bracket-even-spacing': [2, "either"],
    'standard/computed-property-even-spacing': [2, "even"]
    'standard/no-callback-literal': [2, ["cb", "callback"]]
  }
}
```

**6. eslint-plugin-n**

> æœªçŸ¥

**7. eslint-plugin-vue**

> æ·»åŠ å¯¹ Vue çš„æ”¯æŒ

## ç›¸å…³é“¾æ¥

[eslint ä¸­æ–‡ç½‘](https://cn.eslint.org/docs/rules/)
